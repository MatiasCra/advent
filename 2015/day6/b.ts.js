const input = await Deno.readTextFile('./input.txt');
const lines = input.split('\n');
lines.pop();
// Parse input
const instructions = lines.map((line)=>{
    const startFirstNumber = line.search('[0-9]');
    const endFirstNumber = line.search('[0-9] ') + 1;
    const action = line.slice(0, startFirstNumber - 1);
    const from = line.slice(startFirstNumber, endFirstNumber).split(',').map((num)=>parseInt(num));
    const startSecondNumber = line.slice(endFirstNumber, line.length).search('[0-9]') + endFirstNumber;
    const endSecondNumber = line.length;
    const to = line.slice(startSecondNumber, endSecondNumber).split(',').map((num)=>parseInt(num));
    return {
        action,
        from,
        to
    };
});
// Init grid
const grid = new Array(1000);
for(let i = 0; i < 1000; i++){
    grid[i] = new Array(1000);
    for(let j = 0; j < 1000; j++){
        grid[i][j] = 0;
    }
}
// Apply instructions
instructions.forEach((instruction, it)=>{
    let f;
    if (instruction.action === 'turn on') {
        f = (curr)=>curr + 1;
    } else if (instruction.action === 'turn off') {
        f = (curr)=>curr > 1 ? curr - 1 : 0;
    } else {
        f = (curr)=>curr + 2;
    }
    // if (it < 10) {
    //   console.log(instruction)
    //   console.log(f(false))
    // }
    for(let k = instruction.from[1]; k <= instruction.to[1]; k++){
        for(let l = instruction.from[0]; l <= instruction.to[0]; l++){
            grid[k][l] = f(grid[k][l]);
        }
    }
});
// Count
const total = grid.reduce((acum, row)=>{
    const partial = row.reduce((partAcum, value)=>partAcum + value);
    return acum + partial;
}, 0);
console.log(total);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vaG9tZS9tYXRpYXNjcmEvRG9jdW1lbnRzL0Rlc2Fycm9sbG8vYWR2ZW50LzIwMTUvZGF5Ni9iLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGlucHV0ID0gYXdhaXQgRGVuby5yZWFkVGV4dEZpbGUoJy4vaW5wdXQudHh0JylcblxudHlwZSBJbnN0cnVjdGlvbkFjdGlvbiA9ICd0dXJuIG9uJyB8ICd0dXJuIG9mZicgfCAndG9nZ2xlJ1xuaW50ZXJmYWNlIEluc3RydWN0aW9uIHtcbiAgYWN0aW9uOiBJbnN0cnVjdGlvbkFjdGlvblxuICBmcm9tOiBbbnVtYmVyLCBudW1iZXJdXG4gIHRvOiBbbnVtYmVyLCBudW1iZXJdXG59XG5cbmNvbnN0IGxpbmVzID0gaW5wdXQuc3BsaXQoJ1xcbicpXG5saW5lcy5wb3AoKVxuXG4vLyBQYXJzZSBpbnB1dFxuY29uc3QgaW5zdHJ1Y3Rpb25zOiBJbnN0cnVjdGlvbltdID0gbGluZXMubWFwKChsaW5lOiBzdHJpbmcpOiBJbnN0cnVjdGlvbiA9PiB7XG4gIGNvbnN0IHN0YXJ0Rmlyc3ROdW1iZXIgPSBsaW5lLnNlYXJjaCgnWzAtOV0nKVxuICBjb25zdCBlbmRGaXJzdE51bWJlciA9IGxpbmUuc2VhcmNoKCdbMC05XSAnKSArIDFcblxuICBjb25zdCBhY3Rpb24gPSBsaW5lLnNsaWNlKDAsIHN0YXJ0Rmlyc3ROdW1iZXIgLSAxKSBhcyBJbnN0cnVjdGlvbkFjdGlvblxuICBjb25zdCBmcm9tID0gbGluZVxuICAgIC5zbGljZShzdGFydEZpcnN0TnVtYmVyLCBlbmRGaXJzdE51bWJlcilcbiAgICAuc3BsaXQoJywnKVxuICAgIC5tYXAoKG51bTogc3RyaW5nKSA9PiBwYXJzZUludChudW0pKSBhcyBbbnVtYmVyLCBudW1iZXJdXG5cbiAgY29uc3Qgc3RhcnRTZWNvbmROdW1iZXIgPVxuICAgIGxpbmUuc2xpY2UoZW5kRmlyc3ROdW1iZXIsIGxpbmUubGVuZ3RoKS5zZWFyY2goJ1swLTldJykgKyBlbmRGaXJzdE51bWJlclxuICBjb25zdCBlbmRTZWNvbmROdW1iZXIgPSBsaW5lLmxlbmd0aFxuXG4gIGNvbnN0IHRvID0gbGluZVxuICAgIC5zbGljZShzdGFydFNlY29uZE51bWJlciwgZW5kU2Vjb25kTnVtYmVyKVxuICAgIC5zcGxpdCgnLCcpXG4gICAgLm1hcCgobnVtOiBzdHJpbmcpID0+IHBhcnNlSW50KG51bSkpIGFzIFtudW1iZXIsIG51bWJlcl1cblxuICByZXR1cm4geyBhY3Rpb24sIGZyb20sIHRvIH1cbn0pXG5cbi8vIEluaXQgZ3JpZFxuY29uc3QgZ3JpZCA9IG5ldyBBcnJheTxBcnJheTxudW1iZXI+PigxMDAwKVxuZm9yIChsZXQgaSA9IDA7IGkgPCAxMDAwOyBpKyspIHtcbiAgZ3JpZFtpXSA9IG5ldyBBcnJheTxudW1iZXI+KDEwMDApXG4gIGZvciAobGV0IGogPSAwOyBqIDwgMTAwMDsgaisrKSB7XG4gICAgZ3JpZFtpXVtqXSA9IDBcbiAgfVxufVxuXG4vLyBBcHBseSBpbnN0cnVjdGlvbnNcbmluc3RydWN0aW9ucy5mb3JFYWNoKChpbnN0cnVjdGlvbjogSW5zdHJ1Y3Rpb24sIGl0OiBudW1iZXIpID0+IHtcbiAgbGV0IGY6IChjdXJyOiBudW1iZXIpID0+IG51bWJlclxuICBpZiAoaW5zdHJ1Y3Rpb24uYWN0aW9uID09PSAndHVybiBvbicpIHtcbiAgICBmID0gKGN1cnIpID0+IGN1cnIgKyAxXG4gIH0gZWxzZSBpZiAoaW5zdHJ1Y3Rpb24uYWN0aW9uID09PSAndHVybiBvZmYnKSB7XG4gICAgZiA9IChjdXJyKSA9PiBjdXJyID4gMSA/IGN1cnIgLSAxIDogMFxuICB9IGVsc2Uge1xuICAgIGYgPSAoY3VycikgPT4gY3VyciArIDJcbiAgfVxuXG4gIC8vIGlmIChpdCA8IDEwKSB7XG4gIC8vICAgY29uc29sZS5sb2coaW5zdHJ1Y3Rpb24pXG4gIC8vICAgY29uc29sZS5sb2coZihmYWxzZSkpXG4gIC8vIH1cblxuICBmb3IgKGxldCBrID0gaW5zdHJ1Y3Rpb24uZnJvbVsxXTsgayA8PSBpbnN0cnVjdGlvbi50b1sxXTsgaysrKSB7XG4gICAgZm9yIChsZXQgbCA9IGluc3RydWN0aW9uLmZyb21bMF07IGwgPD0gaW5zdHJ1Y3Rpb24udG9bMF07IGwrKykge1xuICAgICAgZ3JpZFtrXVtsXSA9IGYoZ3JpZFtrXVtsXSlcbiAgICB9XG4gIH1cbn0pXG5cbi8vIENvdW50XG5jb25zdCB0b3RhbCA9IGdyaWQucmVkdWNlKChhY3VtOiBudW1iZXIsIHJvdzogbnVtYmVyW10pOiBudW1iZXIgPT4ge1xuICBjb25zdCBwYXJ0aWFsID0gcm93LnJlZHVjZSgocGFydEFjdW06IG51bWJlciwgdmFsdWU6IG51bWJlcikgPT4gcGFydEFjdW0gKyB2YWx1ZSlcbiAgcmV0dXJuIGFjdW0gKyBwYXJ0aWFsXG59LCAwKVxuXG5jb25zb2xlLmxvZyh0b3RhbClcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLFFBQVEsTUFBTSxLQUFLLFlBQVksQ0FBQztBQVN0QyxNQUFNLFFBQVEsTUFBTSxLQUFLLENBQUM7QUFDMUIsTUFBTSxHQUFHO0FBRVQsY0FBYztBQUNkLE1BQU0sZUFBOEIsTUFBTSxHQUFHLENBQUMsQ0FBQyxPQUE4QjtJQUMzRSxNQUFNLG1CQUFtQixLQUFLLE1BQU0sQ0FBQztJQUNyQyxNQUFNLGlCQUFpQixLQUFLLE1BQU0sQ0FBQyxZQUFZO0lBRS9DLE1BQU0sU0FBUyxLQUFLLEtBQUssQ0FBQyxHQUFHLG1CQUFtQjtJQUNoRCxNQUFNLE9BQU8sS0FDVixLQUFLLENBQUMsa0JBQWtCLGdCQUN4QixLQUFLLENBQUMsS0FDTixHQUFHLENBQUMsQ0FBQyxNQUFnQixTQUFTO0lBRWpDLE1BQU0sb0JBQ0osS0FBSyxLQUFLLENBQUMsZ0JBQWdCLEtBQUssTUFBTSxFQUFFLE1BQU0sQ0FBQyxXQUFXO0lBQzVELE1BQU0sa0JBQWtCLEtBQUssTUFBTTtJQUVuQyxNQUFNLEtBQUssS0FDUixLQUFLLENBQUMsbUJBQW1CLGlCQUN6QixLQUFLLENBQUMsS0FDTixHQUFHLENBQUMsQ0FBQyxNQUFnQixTQUFTO0lBRWpDLE9BQU87UUFBRTtRQUFRO1FBQU07SUFBRztBQUM1QjtBQUVBLFlBQVk7QUFDWixNQUFNLE9BQU8sSUFBSSxNQUFxQjtBQUN0QyxJQUFLLElBQUksSUFBSSxHQUFHLElBQUksTUFBTSxJQUFLO0lBQzdCLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxNQUFjO0lBQzVCLElBQUssSUFBSSxJQUFJLEdBQUcsSUFBSSxNQUFNLElBQUs7UUFDN0IsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUc7SUFDZjtBQUNGO0FBRUEscUJBQXFCO0FBQ3JCLGFBQWEsT0FBTyxDQUFDLENBQUMsYUFBMEIsS0FBZTtJQUM3RCxJQUFJO0lBQ0osSUFBSSxZQUFZLE1BQU0sS0FBSyxXQUFXO1FBQ3BDLElBQUksQ0FBQyxPQUFTLE9BQU87SUFDdkIsT0FBTyxJQUFJLFlBQVksTUFBTSxLQUFLLFlBQVk7UUFDNUMsSUFBSSxDQUFDLE9BQVMsT0FBTyxJQUFJLE9BQU8sSUFBSSxDQUFDO0lBQ3ZDLE9BQU87UUFDTCxJQUFJLENBQUMsT0FBUyxPQUFPO0lBQ3ZCLENBQUM7SUFFRCxpQkFBaUI7SUFDakIsNkJBQTZCO0lBQzdCLDBCQUEwQjtJQUMxQixJQUFJO0lBRUosSUFBSyxJQUFJLElBQUksWUFBWSxJQUFJLENBQUMsRUFBRSxFQUFFLEtBQUssWUFBWSxFQUFFLENBQUMsRUFBRSxFQUFFLElBQUs7UUFDN0QsSUFBSyxJQUFJLElBQUksWUFBWSxJQUFJLENBQUMsRUFBRSxFQUFFLEtBQUssWUFBWSxFQUFFLENBQUMsRUFBRSxFQUFFLElBQUs7WUFDN0QsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUU7UUFDM0I7SUFDRjtBQUNGO0FBRUEsUUFBUTtBQUNSLE1BQU0sUUFBUSxLQUFLLE1BQU0sQ0FBQyxDQUFDLE1BQWMsTUFBMEI7SUFDakUsTUFBTSxVQUFVLElBQUksTUFBTSxDQUFDLENBQUMsVUFBa0IsUUFBa0IsV0FBVztJQUMzRSxPQUFPLE9BQU87QUFDaEIsR0FBRztBQUVILFFBQVEsR0FBRyxDQUFDIn0=